function searchAndRender(e,n){n.innerHTML="<p>searching...</p>",searchVersionBase(e,n)}function searchVersionBase(e,n){var t=new XMLHttpRequest;t.onload=function(){onSuccess(JSON.parse(t.responseText),n)},t.onreadystatechange=function(){4==this.readyState&&this.status},t.onerror=function(e){onFail(e,n)};var o='/versionbase/query?versionbase={"version_base":"'+e+'"}';o=encodeURI(o),t.open("GET",o,!0),t.send()}function onSuccess(e,n){let t=n;if(t.innerHTML="",null==e.Data){let e=document.createElement("p");return e.innerHTML="found nothing",void t.append(e)}{let n=document.createElement("p");n.innerHTML="found "+e.Data.length+" records",t.append(n)}for(var o=0;o<e.Data.length;o++){let n=e.Data[o],r=document.createElement("div"),a=document.createElement("div");r.innerHTML="<b>"+(o+1)+". "+n.version_base+"&nbsp;&nbsp;&nbsp;&nbsp;>> </b>",r.classList.add("vb_button"),r.onclick=function(){toggleDisplay(a)},t.append(r),a.classList.add("preview"),toggleDisplay(a),o===e.Data.length-1&&toggleDisplay(a),t.append(a),renderVersionBaseComponents(n.components,a),t.append(document.createElement("br"))}}function onFail(e,n){console.error(e),n.innerHTML="<p>请求出错"+e.toString()+"</p>"}function toggleDisplay(e){var n=e;"none"===n.style.display?n.style.display="block":n.style.display="none"}function createTable(e){var n=document.createElement("table"),t=n.insertRow(-1),o=document.createElement("th");for(var r in o.colSpan="2",o.style.backgroundColor="#AA003F87",o.innerHTML=e.module,t.appendChild(o),e.component){trow=n.insertRow(-1);var a=document.createElement("TH");a.innerHTML=r,trow.appendChild(a),trow.insertCell(-1).innerHTML=e.component[r]}return n}function renderVersionBaseComponents(e,n){var t=[];for(var o in e)-1===t.indexOf(o)&&t.push({module:o,component:e[o]});var r=n;r.innerHTML="";for(var a=0;a<t.length;a++){var s=createTable(t[a]);r.append(s),r.append(document.createElement("br"))}}